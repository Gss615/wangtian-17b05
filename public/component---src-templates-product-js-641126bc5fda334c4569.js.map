{"version":3,"file":"component---src-templates-product-js-641126bc5fda334c4569.js","mappings":"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","sources":["webpack://planty/./src/templates/product.js","webpack://planty/./node_modules/lodash/head.js","webpack://planty/./node_modules/lodash/slice.js"],"sourcesContent":["// 产品详情页面\nimport React from 'react';\nimport _, { map } from 'lodash';\nimport {graphql} from 'gatsby';\n\nimport {Layout} from '../components/index';\nimport {toStyleObj, withPrefix, Link, getPageByFilePath, getPages} from '../utils';\n\nimport BuyButton from '../components/BuyButton';\nimport ProductGrid from '../components/ProductGrid';\nimport Picture from '../components/Picture';\nimport ViewPicture from '../components/ViewPicture';\n\n// this minimal GraphQL query ensures that when 'gatsby develop' is running,\n// any changes to content files are reflected in browser\nexport const query = graphql`\n  query($url: String) {\n    sitePage(path: {eq: $url}) {\n      id\n    }\n  }\n`;\n\nexport default class Product extends React.Component {\n    constructor(props){\n        super(props)\n        this.state={activeKey:0}\n\n        this.handleClick = this.handleClick.bind(this)\n    }\n    handleClick(key){\n        this.setState((updater)=>{\n            if(updater !== key) return {activeKey:key}\n        })\n    }\n    render() {\n        let primary_bg_img_opacity_pct = _.get(this.props, 'pageContext.site.siteMetadata.bg_image_primary_opacity', null) || 100;\n        let primary_bg_img_opacity = primary_bg_img_opacity_pct * 0.01;\n        let singleTable = _.get(this.props,`pageContext.frontmatter.other1.table.single`,null);\n        const features = _.get(this.props,'pageContext.frontmatter.other2.features')\n        const link = _.get(this.props,`pageContext.frontmatter.other3`)\n        const img = _.map(_.get(this.props, 'pageContext.frontmatter.other4.images'), (value, key) => {\n            const result = { value:value.img, key:value.org}\n            return result\n         })[0];\n         console.log('====',img,_.get(this.props, 'pageContext.frontmatter.other4.images'))\n        const imgurl = img ? `huawei/images/${img.key}/${img.value[this.state.activeKey]}`:'';\n        return (\n            <Layout {...this.props}>\n                <main className=\"content\">\n                    <section className=\"product content__row content__row--full-width\">\n                        <div className=\"product__background-left\">\n                            {_.get(this.props, 'pageContext.site.siteMetadata.bg_image_primary', null) && (\n                            <div className=\"product__background-left-img\" style={toStyleObj('background-image: url(\\'' + withPrefix(_.get(this.props, 'pageContext.site.siteMetadata.bg_image_primary', null)) + '\\'); opacity: ' + primary_bg_img_opacity + ';')}/>\n                            )}\n                        </div>\n                        {_.get(this.props, 'pageContext.site.siteMetadata.bg_image_secondary', null) && (\n                        <div className=\"product__background-right\" style={toStyleObj('background-image: url(\\'' + withPrefix(_.get(this.props, 'pageContext.site.siteMetadata.bg_image_secondary', null)) + '\\')')}/>\n                        )}\n                        <div className=\"product__header\">\n                            <Link to={withPrefix('/store')} className=\"product__back-to-store-link\">\n                                <svg width=\"20\" height=\"10\" viewBox=\"0 0 20 10\" xmlns=\"http://www.w3.org/2000/svg\">\n                                    <path d=\"M2.739 4.309h17.011v1.284h-17.11l3.43 3.396-0.895 0.886-4.924-4.875 4.924-4.875 0.895 0.886-3.331 3.298z\" />\n                                </svg>\n                                查看更多\n                            </Link>\n                        </div>\n                        <figure className=\"product__figure\">\n                            <ViewPicture activePic={this.handleClick} activeKey={this.state.activeKey} {...this.props} image={imgurl} alt={_.get(this.props, 'pageContext.frontmatter.title', null)} alt={_.get(this.props, 'pageContext.frontmatter.title', null)} cssClass={'product__image'} />\n                        </figure>\n\n                        <div className=\"product__details\">\n                            <h1 className=\"product__title\">\n                                {_.get(this.props, 'pageContext.frontmatter.title', null)}\n                            </h1>\n                            {_.get(this.props, 'pageContext.frontmatter.category', null) && ((() => {\n                                let category_page = getPageByFilePath(this.props.pageContext.pages, _.get(this.props, 'pageContext.frontmatter.category', null));\n                                return (\n                                    <h2 className=\"product__category\">\n                                        <Link to={withPrefix(_.get(category_page, 'url', null))}> {_.get(category_page, 'frontmatter.title', null)} </Link>\n                                    </h2>\n                                );\n                            })())}\n                            <article className=\"product__description\">\n                                {_.get(this.props, 'pageContext.frontmatter.description', null)}\n                            </article>\n                            <BuyButton {...this.props} product_page={this.props.pageContext} />\n                        </div>\n                    </section>\n                    <section className='content__row features'>\n                        {/* <h2>特性</h2> */}\n                        {features?\n                        <ul>\n                            {features.map((item,i)=>{\n                                return <li key={i+'li'}>\n                                    <h3 className=\"card_title\">{item.title}</h3>\n                                    {item.dec.map((text,j)=>{\n                                        return <p key={j+'p'}>{text}</p>\n                                    })}\n                                </li>\n                            })}\n                        </ul>:\n                        null\n                        }\n                    </section>\n                    <section className='content__row table'>\n                        <h2>技术规格</h2>\n                        {singleTable ? <div>\n                            <table>\n                                <thead>\n                                    <tr>\n                                        {_.head(singleTable).map(item => <td>{item.text}</td>)}\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {_.slice(singleTable, 1).map(item => {\n                                        return (<tr>\n                                            {item.map((list) => <td rowSpan={list.row?list.row:1} colSpan={list.col?list.col:1}>{list.text.split('\\n').map(text=>(<span>{text}<br></br></span>))}</td>)}\n                                        </tr>)\n                                    })}\n\n                                </tbody>\n                            </table>\n                        </div> : (2)}\n                            {link?<div className='table-btn'>\n                                <button className='button button--std snipcart-add-item'><a href={link} target='_blank'>查看更多资料</a></button>\n                            </div>:null}\n                    </section>\n                    <Link to={withPrefix('/store')} className=\"content__row content__row--full-width content__row--mb-0 product__back-to-store\"{...(_.get(this.props, 'pageContext.site.siteMetadata.bg_image_product', null) ? ({style: toStyleObj('background-image: url(\\'' + withPrefix(_.get(this.props, 'pageContext.site.siteMetadata.bg_image_product', null)) + '\\')')}) : null)}>\n                        <svg width=\"20\" height=\"10\" viewBox=\"0 0 20 10\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path d=\"M2.739 4.309h17.011v1.284h-17.11l3.43 3.396-0.895 0.886-4.924-4.875 4.924-4.875 0.895 0.886-3.331 3.298z\" />\n                        </svg>\n                        查看更多\n                    </Link>\n                </main>\n            </Layout>\n        );\n    }\n}\n","/**\n * Gets the first element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias first\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the first element of `array`.\n * @example\n *\n * _.head([1, 2, 3]);\n * // => 1\n *\n * _.head([]);\n * // => undefined\n */\nfunction head(array) {\n  return (array && array.length) ? array[0] : undefined;\n}\n\nmodule.exports = head;\n","var baseSlice = require('./_baseSlice'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toInteger = require('./toInteger');\n\n/**\n * Creates a slice of `array` from `start` up to, but not including, `end`.\n *\n * **Note:** This method is used instead of\n * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are\n * returned.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction slice(array, start, end) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n    start = 0;\n    end = length;\n  }\n  else {\n    start = start == null ? 0 : toInteger(start);\n    end = end === undefined ? length : toInteger(end);\n  }\n  return baseSlice(array, start, end);\n}\n\nmodule.exports = slice;\n"],"names":["Product","props","state","activeKey","handleClick","bind","key","this","setState","updater","render","primary_bg_img_opacity","singleTable","features","link","img","value","org","console","log","category_page","imgurl","className","style","toStyleObj","withPrefix","to","width","height","viewBox","xmlns","d","activePic","image","alt","cssClass","getPageByFilePath","pageContext","pages","product_page","map","item","i","title","dec","text","j","list","rowSpan","row","colSpan","col","split","href","target","React","module","exports","array","length","undefined","baseSlice","isIterateeCall","toInteger","start","end"],"sourceRoot":""}